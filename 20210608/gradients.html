<!DOCTYPE html>
<head>
    <style>
        body, html {
            padding: 0;
            margin: 0;
            overflow: hidden;
            height: 100%;
        }

        canvas {
            z-index: -1;
        }

        p {
            color: white;
            background-color: black;
        }

        #fps {
            position: absolute;
            padding: 0;
            margin: 0;
            width: 50px;
            text-align: center;
        }
    </style>
    <title>gradients</title>
</head>

<body>
<div id="container">
    <p id="fps"></p>
    <canvas id="canvas"></canvas>
</div>
<script type="text/javascript" src="https://livejs.com/live.js"></script>
<script type="text/javascript" src="../utils/utils.js"></script>
<script type="application/javascript">
    let canvas = document.getElementById("canvas");
    let c = canvas.getContext("2d");
    let width, height;
    let colorBackground = '#1D4D7A';

    function updateCanvasSize() {
        width = window.innerWidth;
        height = window.innerHeight;
        canvas.width = width;
        canvas.height = height;
    }

    function update(time) {
        document.getElementById("fps").innerHTML = averageFps();
        time *= 0.0005;
        updateCanvasSize();
        c.resetTransform();
        c.clearRect(0, 0, width, height);
        c.fillStyle = colorBackground;
        c.fillRect(0, 0, width, height);
        animate(time);
        requestAnimationFrame(update);
    }

    requestAnimationFrame(update);

    function animate(time) {
        let count = 50;
        let radius = 100;
        var gradient = c.createLinearGradient(0, -radius, 0, radius);
        gradient.addColorStop(0, "red");
        gradient.addColorStop(1, "white");

        setTransform(c, width / 2, height / 2);
        c.lineWidth = 10;
        c.strokeStyle = gradient;
        c.beginPath();
        for (let i = 1; i < count; i++) {
            let iNorm = map(i, 1, count - 1, 0, 1);
            let x = radius * Math.sin(iNorm * Math.PI * 2);
            let y = radius * Math.cos(iNorm * Math.PI * 2);
            if (i === 0) {
                c.moveTo(x, y);
            } else {
                c.lineTo(x, y);
            }
        }
        c.closePath();
        c.stroke();
        c.resetTransform();
    }

</script>
</body>
