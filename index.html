<!DOCTYPE HTML>
<head>
</head>
<body style="background: hsl(0,0%,12%); color:white; ">
    <h1>Krab's canvas sketches</h1>
    <ul class="dir" id="directoryList" style="font-size: 32px; list-style-type: none; margin: 30px">

    </ul>
</body>

<script type="text/javascript" src="https://livejs.com/live.js"></script>
<script>

    async function load() {
        let masterBranch = await fetch("https://api.github.com/repos/krabcode/canvas/git/trees/master?recursive=1");
        masterBranch = await masterBranch.json();
        console.log(masterBranch);
        let dir = document.getElementById("directoryList");
        for(let i = masterBranch.tree.length-1; i > 0; i--) {
            let path = masterBranch.tree[i].path;
            if(path.endsWith("html") && path !== 'index.html' && !path.startsWith('templates')){
                let li = document.createElement("li");
                let a = document.createElement("a");
                a.textContent = path.replace(".html", "")
                    .replace("/", "-")
                    .replace("/", "-")
                    .replace("/", " ");
                a.href = path;

                li.style.padding = "5px";
                li.appendChild(a);
                dir.appendChild(li);
            }
        }
    }

    load();

</script>