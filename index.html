<!DOCTYPE HTML>
<head>
    <title>Canvas</title>
</head>

<body>
<h1 id="header">HTML5 Canvas sketches</h1>
<p><a href="https://github.com/KrabCode/Canvas">github</a></p>
<ul id="directoryList" style=""></ul>
</body>

<style>
    body {
        color: red;
        background-color: hsl(0, 0%, 10%);
        margin: 30px;
    }

    ul {
        font-size: 32px;
    }

    ul:hover {

    }

    li {
        list-style-type: circle;
        color: white;
        padding: 5px;
    }

    li:hover {
        list-style-type: disc;
    }

    a {
        color: hsl(0, 0%, 80%);
    }

    a:visited {
        color: hsl(0, 0%, 60%);
    }

    a:hover {
        color: hsl(0, 0%, 100%);
    }
</style>

<script type="text/javascript" src="https://livejs.com/live.js"></script>
<script>

    async function load() {
        let masterBranch = await fetch("https://api.github.com/repos/krabcode/canvas/git/trees/master?recursive=1");
        masterBranch = await masterBranch.json();
        let dir = document.getElementById("directoryList");
        for (let i = masterBranch.tree.length - 1; i > 0; i--) {
            let path = masterBranch.tree[i].path;
            if (path.endsWith("html") && path !== 'index.html' && !path.startsWith('templates')) {
                let li = document.createElement("li");
                let a = document.createElement("a");
                a.textContent = path.replace(".html", "")
                    .replace("/", "-")
                    .replace("/", "-")
                    .replace("/", " ");
                a.href = path;
                li.appendChild(a);
                dir.appendChild(li);
            }
        }
    }

    load();

    function animate(time) {
        time = time * 0.1;
        let header = document.getElementById("header");
        header.style.color = 'hsl(' + time + ', 100%, 80%)';
        requestAnimationFrame(animate)
    }

    requestAnimationFrame(animate);

</script>
